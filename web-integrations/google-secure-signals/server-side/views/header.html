<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Server-Side <%- identityName %> Integration Example with Google Secure Signals</title>
    <link rel="stylesheet" type="text/css" href="/stylesheets/app.css" />
    <link rel="shortcut icon" href="/images/favicon.png" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script async src="<%- secureSignalsSdkUrl %>"></script>
    <script async src="https://securepubads.g.doubleclick.net/tag/js/gpt.js"></script>

    <script type="text/javascript">
      const getUid2AdvertisingToken = async () => {
        const response = await fetch('/getFreshToken');
        const result = await response.json();
        console.log(result);
        return result.advertising_token;
      };

      window.getUid2AdvertisingToken = getUid2AdvertisingToken;

      // If uid2SecureSignalProvider is initialized before getUid2AdvertisingToken is assigned, call registerSecureSignalProvider
      if (window.__uid2SecureSignalProvider) {
        window.__uid2SecureSignalProvider.registerSecureSignalProvider();
      }
    </script>
  </head>
  <body>
    <h1>Server-Side <%- identityName %> Integration Example with Google Secure Signals</h1>
    <p class="intro">
      This example demonstrates how a content publisher can use the <%- identityName %> services to implement the
      <a href="<%- docsBaseUrl %>/guides/integration-google-ss#server-side-integration">server-side <%- identityName %> integration workflow with Secure Signals</a>. [<a
        href="https://github.com/IABTechLab/uid2-examples/tree/main/web-integrations/google-secure-signals/server-side"
        >Source Code</a
      >]
      <br />
      <br />
      This assumes that the publisher has implemented
      <a href="<%- docsBaseUrl %>/guides/integration-publisher-server-side"><%- identityName %> Server-Side integration</a>
      on the backend and is able to pass the resulting <%- identityName %> identity response to the front end.
    </p>
  </body>
</html>
